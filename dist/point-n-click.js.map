{"version":3,"sources":["webpack:///webpack/bootstrap 58e29ee9718aa9a5ac55","webpack:///./src/dsMessager.js","webpack:///./src/pointerDragController.js","webpack:///./entry.js","webpack:///./src/selectController.js","webpack:///./src/touchDragController.js","webpack:///./src/mouseDragController.js","webpack:///./src/keyboardController.js","webpack:///./src/clickController.js"],"names":["dsMessager","D_events","item_drag_start","addClasses","item_dragging","item_drag_end","removeClasses","drag_start","dragging","drag_end","item_selected","item_unselected","has_selected","has_unselected","container_over","container_out","attempt_combine","_publish","eventName","receiver","data","bubbles","event","CustomEvent","detail","dispatchEvent","target","classList","add","remove","publish","PointerDragController","el","selectController","pointerPosition","x","y","origX","origY","_pressStartTime","_clickMaxTime","_prevPositionStyle","_isDragging","myContainerEl","_selectController","_potentialSelect","_currentTargets","settings","positionRelativeTo","style","position","e","currentTarget","Date","getTime","isSelectable","getBoundingClientRect","left","top","stopPropagation","_isMove","pointerEvents","setSelectedItem","trigger","_prepareDragStyles","getTargets","hasSelectedItem","getSelectedItem","moveElToPosition","targetElement","getTopmostTarget","getActiveTarget","hasActiveTarget","_cancelHover","setActiveTarget","preventDefault","combine","_removeDragStyles","unsetSelectedItem","unsetActiveTarget","document","elementFromPoint","includes","parentNode","body","posX","posY","viewportOffset","prevPositionStyle","PointNClick","SelectController","TouchDragController","MouseDragController","KeyboardController","ClickController","module","exports","pushIfNotContains","arr","Array","isArray","push","options","defaults","itemFilterFn","defaultFilterFn","bind","itemClass","selectables","targets","registerElsOnInit","Object","assign","_selectedItem","_activeTarget","D_dom_attributes","SELECTED_ID","getAllItems","forEach","registerEl","item","selectedItem","filterSettings","_getElsBySelector","_enableEl","_disableEl","getSelectables","_unsetSelectedItem","setAttribute","id","disableSelectables","enableTargets","focus","disableTargets","blur","removeAttribute","enableSelectables","callback","_enableEls","_disableEls","els","selector","slice","call","querySelectorAll","requester","_onTouchStart","_onTouchMove","_onTouchEnd","ontouchmove","draggable","addEventListener","window","removeEventListener","_onPressStart","_onPressMove","changedTouches","clientX","clientY","_onPressEnd","_onMouseDown","_onMouseMove","_onMouseUp","button","_onKeyDown","ESC","ENTER","keyCode","stopImmediatePropagation","isTarget","_onClick"],"mappings":"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","file":"dist/point-n-click.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 58e29ee9718aa9a5ac55","export function dsMessager () {\n\n\tconst D_events = {\n\n\t\t/* drag */\n\t\titem_drag_start: \t\t{ addClasses: 'draggable-item--dragging' },\n\t\titem_dragging: \t\t\t{},\n\t\titem_drag_end: \t\t\t{ removeClasses: 'draggable-item--dragging' },\n\t\t// the next three are applied to the container element (the workspace).\n\t\tdrag_start:\t\t\t\t{ addClasses: 'dragging' },\n\t\tdragging:\t\t\t\t{},\n\t\tdrag_end:\t\t\t\t{ removeClasses: 'dragging' },\n\n\t\t/* drag -- touch specific */\n\t\t// item_drag_start_touch: \t{ addClasses: 'draggable-item--dragging--touch' },\n\t\t// item_dragging_touch: \t{},\n\t\t// item_drag_end_touch: \t{ removeClasses: 'draggable-item--dragging--touch' },\n\n\t\t/* select */\n\t\titem_selected: \t\t\t{ addClasses: 'draggable-item--selected' },\n\t\titem_unselected: \t\t{ removeClasses: 'draggable-item--selected' },\n\t\t// the next two are applied to the container element (the workspace).\n\t\thas_selected:\t\t\t{ addClasses: 'workspace-has-selected'},\n\t\thas_unselected:\t\t\t{ removeClasses: 'workspace-has-selected'},\n\n\t\t/* containers */\n\t\t// container_dropped_onto: { addClasses: 'draggable-container--occupied'},\n\t\t// container_emptied:  \t{ removeClasses: 'draggable-container--occupied' },\n\t\tcontainer_over: \t\t{ addClasses: 'droppable-container--over'},\n\t\tcontainer_out: \t\t\t{ removeClasses: 'droppable-container--over'},\n\n\t\t/* actions */\n\t\tattempt_combine: \t\t{},\n\n\t};\n\n\tlet _publish = (eventName, receiver, data, bubbles = true) => {\n\t\tlet event = new CustomEvent(eventName, {\n\t\t\tdetail: data,\n\t\t\tbubbles: bubbles\n\t\t});\n\t\treceiver.dispatchEvent(event);\n\t\tif (data.target && D_events[eventName]) {\n\t\t\tdata.target.classList.add(D_events[eventName].addClasses);\n\t\t\tdata.target.classList.remove(D_events[eventName].removeClasses);\n\t\t}\n\n\t}\n\n\treturn {\n\t\tpublish: _publish\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dsMessager.js","import { dsMessager } from './dsMessager.js'\n\nexport default class PointerDragController {\n\tconstructor(el, selectController) {\n\t\tthis.pointerPosition = {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\torigX: 0,\n\t\t\torigY: 0\n\t\t}\n\t\tthis._pressStartTime = null;\n\t\tthis._clickMaxTime = 150;\n\n\t\tthis._prevPositionStyle = null;\n\n\t\tthis._isDragging = false;\n\t\tthis.myContainerEl = el;\n\t\tthis._selectController = selectController;\n\t\tthis._potentialSelect = null;\n\n\t\t// we're going to store the targets at pressStart, so that we're not reevaluating \n\t\t// the select function on every pressMove event.\n\t\tthis._currentTargets = [];\n\t\tif (this._selectController.settings.positionRelativeTo) {\n\t\t\tthis.myContainerEl.style.position = \"relative\";\n\t\t}\n\t}\n\n\n\t// Generic pointer event handlers\n\t_onPressStart(e) {\n\n\t\tvar target = e.currentTarget;\n\n\t\tthis._pressStartTime = (new Date).getTime();\n\n\t\t// Check if the mousedown is on a selectable element.\n\t\tif (this._selectController.isSelectable(target)) \n\t\t{\n\t\t\tthis.pointerPosition.origX = target.getBoundingClientRect().left;\n\t\t\tthis.pointerPosition.origY = target.getBoundingClientRect().top;\n\t\t\tthis._potentialSelect = target;\n\t\t\te.stopPropagation();\n\t\t} \n\t}\n\n\t_onPressMove(e, x, y) {\n\n\t\t// this gets set before we know if it's a drag or click.\n\t\tif (this._potentialSelect) {\n\t\t\tvar target = this._potentialSelect;\n\t\t\tif (!this._isDragging && this._isMove()) {\n\t\t\t\t// drag start\n\t\t\t\ttarget.style.pointerEvents = \"none\";\n\t\t\t\tthis._isDragging = true;\n\t\t\t\tthis._selectController.setSelectedItem(target);\n\n\t\t\t\tthis.trigger('item_drag_start', target);\n\t\t\t\tthis.trigger('drag_start', this.myContainerEl);\n\t\t\t\tthis._prepareDragStyles(target);\n\t\t\t\tthis._potentialSelect = null;\n\t\t\t\tthis._currentTargets = this._selectController.getTargets();\n\t\t\t}\n\n\t\t}\n\t\tif (this._selectController.hasSelectedItem()) {\n\t\t\tvar target = this._selectController.getSelectedItem();\n\n\n\t\t\tif (this._isDragging && this._selectController.hasSelectedItem()) {\n\n\t\t\t\tthis.trigger('item_dragging', target);\n\t\t\t\tthis.trigger('dragging', this.myContainerEl);\n\t\t\t\tthis.pointerPosition.x = x;\n\t\t\t\tthis.pointerPosition.y = y;\n\n\t\t\t\tthis.moveElToPosition(target, this.pointerPosition.x, this.pointerPosition.y);\n\t\t\t\tvar targetElement = this.getTopmostTarget(this.pointerPosition.x, this.pointerPosition.y);\n\n\t\t\t\tif (targetElement) {\n\t\t\t\t\tif (this._selectController.getActiveTarget() !== targetElement) {\n\t\t\t\t\t\tif (this._selectController.hasActiveTarget()) {\n\t\t\t\t\t\t\tthis._cancelHover();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// this fires the first time we go over a target.\n\t\t\t\t\t\tthis._selectController.setActiveTarget(targetElement);\n\t\t\t\t\t\tthis.trigger('container_over', targetElement);\n\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t} else if (this._selectController.hasActiveTarget()) {\n\t\t\t\t\tthis._cancelHover();\n\t\t\t\t}\n \n\t\t\t}\n\n\t\t\te.preventDefault();\n\n\t\t}\n\n\t}\n\n\t_onPressEnd(e) {\n\t\tthis._pressStartTime = null;\n\t\tthis._potentialSelect = null;\n\t\tthis._currentTargets = [];\n\t\tvar target = e.currentTarget;\n\n\t\tif (this._isDragging) {\n\t\t\ttarget = this._selectController.getSelectedItem();\n\t\t\tthis._isDragging = false;\n\n\t\t\t// if dropped onto a valid element, broadcast.\n\t\t\tif (this._selectController.hasActiveTarget()) {\n\t\t\t\tthis._selectController.combine();\n\t\t\t}\n\n\t\t\tthis.trigger('item_drag_end', target);\n\t\t\tthis.trigger('drag_end', this.myContainerEl);\n\t\t\tthis._removeDragStyles(target);\n\t\t\tthis._cancelHover();\n\n\t\t\tthis._selectController.unsetSelectedItem();\n\t\t\tthis._selectController.unsetActiveTarget();\n\t\t\te.stopPropagation();\n\t\t\ttarget.style.pointerEvents = \"auto\";\n\t\t} \n\n\t}\n\n\t_cancelHover() {\n\t\tif (this._selectController.hasActiveTarget()) {\n\t\t\t// we've left a the target.\n\t\t\tthis.trigger('container_out', this._selectController.getActiveTarget());\n\t\t\tthis._selectController.unsetActiveTarget();\n\n\t\t}\n\t}\n\n\t// find topmost element that is a target (or null)\n\t// modified from: https://github.com/Shopify/draggable/blob/master/src/shared/utils/closest/closest.js\n\tgetTopmostTarget(x, y) {\n\t\tlet el = document.elementFromPoint(x, y);\n\n\t\tdo {\n\t\t\tif (!el) return;\n\t\t\tif (this._currentTargets.includes(el)) {\n\t\t\t\treturn el;\n\t\t\t}\n\t\t\tel = el.parentNode;\n\t\t} while (el && el !== this.myContainerEl && el !== document.body && el !== document);\n\n\t\treturn null;\n\t}\n\n\t// DOM manipulation\n\n\tmoveElToPosition(el, posX, posY) {\n\n\t\tif (this._selectController.settings.positionRelativeTo) {\n\t\t\tvar viewportOffset = this._selectController.settings.positionRelativeTo.getBoundingClientRect();\n\t\t\t// these are relative to the viewport\n\t\t\tposX = posX - viewportOffset.left;\n\t\t\tposY = posY - viewportOffset.top;\n\n\t\t}\n\t\n\t\tel.style.left = posX + 'px';\n\t\tel.style.top = posY + 'px';\n\t}\n\n\t_prepareDragStyles(target) {\n\t\tthis.prevPositionStyle = target.style.position;\n\t\tif (this._selectController.settings.positionRelativeTo) {\n\t\t\ttarget.style.position = 'absolute';\n\t\t} else {\n\t\t\ttarget.style.position = 'fixed';\n\t\t}\n\n\t}\n\n\t_removeDragStyles(target) {\n\t\tthis.moveElToPosition(target, this.pointerPosition.origX, this.pointerPosition.origY);\n\t\ttarget.style.position = this._prevPositionStyle;\n\t\ttarget.style.left = null;\n\t\ttarget.style.top = null;\n\t\tthis._prevPositionStyle = null;\n\t}\n\n\t// State functions\n\n\t_isMove() {\n\t\tif (this._pressStartTime === null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn ((new Date).getTime() - this._pressStartTime > this._clickMaxTime);\n\t}\n\n\n\t// events\n\ttrigger(eventName, target) {\n\t\tdsMessager().publish(eventName, target, {\n\t  \t\tpointerPosition: this.pointerPosition,\n\t  \t\ttarget: target\n\t  \t});\n\t}\n\n} \n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pointerDragController.js","import SelectController from \"./src/selectController.js\"\nimport TouchDragController from \"./src/touchDragController.js\"\nimport MouseDragController from \"./src/mouseDragController.js\"\nimport KeyboardController from \"./src/keyboardController.js\"\nimport ClickController from \"./src/clickController.js\"\n\n\nvar PointNClick = {\n\tSelectController: SelectController,\n\tTouchDragController: TouchDragController,\n\tMouseDragController: MouseDragController,\n\tKeyboardController: KeyboardController,\n\tClickController: ClickController\n};\n\nmodule.exports = PointNClick;\n\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","/* Select Controller\n\noptions = {\n\tselectables: [domEl, domEl, ...] || selector (string)\n\ttargets: [domEl, domEl, ...] || selector (string)\n}\n\nTODO: the problem with allowing an array of dom elements is that you have to\nupdate the array if any elements get added/removed. There's currently no mechanism\nfor that.\n*/\n\nimport { dsMessager } from './dsMessager.js'\n\nlet pushIfNotContains = (el, arr) => {\n\tif (Array.isArray(arr) && !arr.includes(el)) {\t\n\t\tarr.push(el);\n\t}\n}\n\nexport default class SelectController {\n\tconstructor(myContainerEl, options = {}) {\n\t\tconst defaults = {\n\t\t\titemFilterFn: this.defaultFilterFn.bind(this),\n\t\t\titemClass: \"point-n-click\",\n\t\t\tselectables: \".draggable\",\n\t\t\ttargets: \".droppable\",\n\t\t\tregisterElsOnInit: true,\n\t\t\tpositionRelativeTo: false\n\t\t};\n\t\t// See README.md for info about the different options. \n\t\tthis.settings = Object.assign({}, defaults, options);\n\n\t\t// myContainerEl\n\t\tthis.myContainerEl = myContainerEl;\n\t\tthis._selectedItem = null;\n\t\tthis._activeTarget = null;\n\n\t\tthis.D_dom_attributes = {\n\t\t\tSELECTED_ID: 'data-selected-draggable-id',\n\t\t}\n\n\t\tif (this.settings.registerElsOnInit) {\n\t\t\tthis.getAllItems().forEach(\n\t\t\t\titem => this.registerEl(item)\n\t\t\t);\n\t\t}\n\n\t}\n\n\t// This returns the selectables if no selectedItem is specified,\n\t// and targets if a selectedItem is specified.\n\tdefaultFilterFn (selectedItem) {\n\t\tlet filterSettings = null;\n\t\tif (!selectedItem) {\n\t\t\t// use selectables\n\t\t\tfilterSettings = this.settings.selectables;\n\t\t} else {\n\t\t\tfilterSettings = this.settings.targets;\n\t\t}\n\n\t\tif (typeof filterSettings === 'string') {\n\t\t\t// this is a selector\n\t\t\treturn this._getElsBySelector(filterSettings);\n\t\t} else if (Array.isArray(filterSettings)) {\n\t\t\t// this should be an array of html els.\n\t\t\treturn filterSettings;\n\t\t}\n\t}\n\n\t// registration fns\n\n\t// So... because we're allowing people to add elements as selectables or targets\n\t// post-init, we need a way to run the init on just the element, \n\t// activating elements, so that they are tabbable etc.\n\n\tregisterEl(el) {\n\t\tif (this.settings.itemFilterFn(this._selectedItem).includes(el)) {\n\t\t\tthis._enableEl(el);\n\t\t} else {\n\t\t\tthis._disableEl(el);\n\t\t} \n\t\tif (this.isSelectable(el)) {\n\t\t\tpushIfNotContains(el, this.settings.selectables);\n\t\t} else {\n\t\t\tpushIfNotContains(el, this.settings.targets);\n\t\t}\n\t}\n\n\tgetAllItems() {\n\t\treturn this._getElsBySelector(\".\" + this.settings.itemClass);\n\t}\n\n\t// selectables fns\n\n\tisSelectable(el) {\n\t\treturn this.getSelectables().includes(el);\n\t}\n\n\tgetSelectables() {\n\t\treturn this.settings.itemFilterFn();\n\t}\n\n\t// targets fns\n\n\tisTarget(el) {\n\t\treturn this.getTargets().includes(el);\n\t}\n\n\tgetTargets() {\n\t\treturn this.settings.itemFilterFn(this._selectedItem);\n\t}\n\n\t/* currently selected item */\n\n\thasSelectedItem() {\n\t\treturn this._selectedItem !== null; \n\t}\n\n\tisSelectedItem(el) {\n\t\treturn el === this._selectedItem;\n\t}\n\n\tgetSelectedItem() {\n\t\treturn this._selectedItem;\n\t}\n\n\t// NOTE: this also disables the selectables and enables targets, handles focus, etc.\n\tsetSelectedItem(el) {\n\t\tif (!el) {\n\t\t\tthis._unsetSelectedItem();\n\t\t\treturn;\n\t\t}\n\t\tthis.myContainerEl.setAttribute(this.D_dom_attributes.SELECTED_ID, el.id);\n\t\tthis._selectedItem = el;\n\t\tel.setAttribute('aria-grabbed', true);\n\t\tthis.trigger('item_selected', el);\n\t\tthis.trigger('has_selected', this.myContainerEl);\n\t\tthis.disableSelectables();\n\t\tthis.enableTargets();\n\t\tel.focus();\n\t}\n\n\t// this unsets the selected item. NOTE: It also disables targets (if enabled) and enables\n\t// selectables (if disabled). Should we rename to reflect that?\n\tunsetSelectedItem() {\n\t\tif (!this._selectedItem) {\n\t\t\treturn;\t\t\t\n\t\t}\n\t\tthis._selectedItem.setAttribute('aria-grabbed', false);\n\t\tthis.trigger('item_unselected', this._selectedItem);\n\t\tthis.trigger('has_unselected', this.myContainerEl);\n\t\t// careful, the order here was finicky. disableTargets has to happen\n\t\t// before _selectedItem = null, in case the user has passed a fn \n\t\t// (requiring _selectedItem) to identify targets.\n\t\tthis.disableTargets();\n\t\tthis._selectedItem.blur();\n\t\tthis._selectedItem = null;\n\t\tthis.myContainerEl.removeAttribute(this.D_dom_attributes.SELECTED_ID);\n\n\t\tthis.enableSelectables();\n\n\t}\n\n\t/* active target fns */\n\n\thasActiveTarget() {\n\t\treturn this._activeTarget !== null; \n\t}\n\n\tgetActiveTarget() {\n\t\treturn this._activeTarget;\n\t}\n\n\tsetActiveTarget(el) {\n\t\tif (!el) {\n\t\t\tthis.unsetActiveTarget();\n\t\t\treturn;\n\t\t}\n\t\tthis._activeTarget = el;\n\t\t// this.trigger('item_selected', el);\n\t}\n\n\tunsetActiveTarget() {\n\t\tif (!this._activeTarget) {\n\t\t\treturn;\t\t\t\n\t\t}\n\t\tthis._activeTarget = null;\n\t}\n\n\tcombine(item, target) {\n\t\titem = item || this.getSelectedItem();\n\t\ttarget = target || this.getActiveTarget();\n\t\tif (!item || !target) {\n\t\t\treturn;\n\t\t}\n\t\tthis.trigger('attempt-combine', target, item);\n\t\tthis.unsetSelectedItem();\n\t}\n\n\t// enable and disable groups functions (adds tabindex, roles, classes to\n\t// selectables and targets). These are called as needed by setSelectedItem()\n\t// and unsetSelectedItem(), so most of the time, we won't need to call these explicitly.\n\t// I've left these with 'public' notation (not _enableSelectables()) just in case\n\t// there's a use case I'm not anticipating.\n\n\tenableSelectables(callback) {\n\t\tthis._enableEls(this.getSelectables(), callback);\n\t}\n\n\tdisableSelectables(callback) {\n\t\tthis._disableEls(this.getSelectables(), callback);\n\t}\n\n\tenableTargets(callback) {\n\t\tthis._enableEls(this.getTargets(), callback);\n\t}\n\n\tdisableTargets(callback) {\n\t\tthis._disableEls(this.getTargets(), callback);\n\t}\n\n\t_enableEl(el, callback) {\n\t\tel.removeAttribute('tabindex');\n\t\tel.setAttribute('role', 'button');\n\t\tel.classList.add('ready');\n\t\tif (typeof callback == 'function') {\n\t\t\tcallback(el);\n\t\t}\n\t}\n\n\t_disableEl(el, callback) {\n\t\tel.setAttribute('tabindex', -1);\n\t\tel.removeAttribute('role');\t\n\t\tel.classList.remove('ready');\n\t\tif (typeof callback == 'function') {\n\t\t\tcallback(el);\n\t\t}\n\t}\n\n\t_enableEls(els, callback) {\n\t\tels.forEach(el => this._enableEl(el, callback));\n\t}\n\n\t_disableEls(els, callback) {\n\t\tels.forEach(el => this._disableEl(el, callback));\n\t}\n\n\t// utils\n\n\t// [].slice.call is for EDGE, so we get an array from querySelectorAll,\n\t// like we do in other browsers.\n\t_getElsBySelector(selector) {\n\t\treturn [].slice.call(this.myContainerEl.querySelectorAll(selector));\n\t}\n\n\t// events\n\ttrigger(eventName, target, requester) {\n\t\tdsMessager().publish(eventName, target, {\n\t  \t\ttarget: target,\n\t  \t\trequester: requester \n\t  \t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/selectController.js","import PointerDragController from './pointerDragController.js'\n\nexport default class TouchDragController extends PointerDragController {\n\tconstructor(el, selectController) {\n\t\tsuper(el, selectController);\n\n\t\tthis._onTouchStart = this._onTouchStart.bind(this);\n\t\tthis._onTouchMove = this._onTouchMove.bind(this);\n\t\tthis._onTouchEnd = this._onTouchEnd.bind(this);\n\n\t\tthis.myContainerEl.ontouchmove = function(e){ e.preventDefault(); }\n\n\t\tselectController.getSelectables().forEach(\n\t\t\tdraggable => this.registerEl(draggable)\n\t\t);\n\t\tthis.myContainerEl.addEventListener('touchmove', this._onTouchMove);\n\t\twindow.addEventListener('touchend', this._onTouchEnd);\n\t}\n\n\tregisterEl(el) {\n\t\tel.removeEventListener('touchstart', this._onTouchStart);\n\t\tel.addEventListener('touchstart', this._onTouchStart);\n\t}\n\n\t_onTouchStart(e) {\n\t\t// figure out how to add touch-specific classes, events etc.\n\t\tthis._onPressStart(e);\n\t}\n\n\t_onTouchMove(e) {\n\t\tthis._onPressMove(e, e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n\t\te.preventDefault();\n\t}\n\n\t_onTouchEnd(e) {\n\t\tthis._onPressEnd(e);\n\t}\n\n} \n\n\n\n// WEBPACK FOOTER //\n// ./src/touchDragController.js","import PointerDragController from './pointerDragController.js'\n\nexport default class MouseDragController extends PointerDragController {\n\tconstructor(el, selectController) {\n\t\tsuper(el, selectController);\n\n\t\tthis._onMouseDown = this._onMouseDown.bind(this);\n\t\tthis._onMouseMove = this._onMouseMove.bind(this);\n\t\tthis._onMouseUp = this._onMouseUp.bind(this);\n\n\t\tselectController.getSelectables().forEach(\n\t\t\tdraggable => this.registerEl(draggable)\n\t\t);\n\t\twindow.addEventListener('mousemove', this._onMouseMove);\n\t\twindow.addEventListener('mouseup', this._onMouseUp);\n\n\t}\n\n\tregisterEl(el) {\n\t\tel.removeEventListener('mousedown', this._onMouseDown);\n\t\tel.addEventListener('mousedown', this._onMouseDown);\n\t}\n\n\t_onMouseDown(e) {\n\t\tif (e.button == 0) {\n\t\t\tthis._onPressStart(e);\n\t\t\t// Note that if we don't prevent default here, dragging sometimes\n\t\t\t// tries to use OS-level (or maybe browser-level) drag functionality.\n\t\t\t// We can't do this in the pointerDragController though, because\n\t\t\t// if we preventDefault on a touchStart, 'clicks' never go through\n\t\t\t// (ie even when it's not a drag.)\n\t\t\te.preventDefault();\t\t\t\n\t\t}\n\t}\n\n\t_onMouseMove(e) {\n\t\tif (e.button == 0) {\n\t\t\tthis._onPressMove(e, e.clientX, e.clientY);\n\t\t}\t\n\t\t// changedTouches[0].pageX\n\t}\n\n\t_onMouseUp(e) {\n\t\tif (e.button == 0) {\n\t\t\tthis._onPressEnd(e);\n\t\t\te.preventDefault();\t\t\t\n\t\t}\n\t}\n\n} \n\n\n\n\n// WEBPACK FOOTER //\n// ./src/mouseDragController.js","export default class KeyboardController {\n\tconstructor(el, selectController) {\n\n\t\tthis._onKeyDown = this._onKeyDown.bind(this);\n\t\tthis.myContainerEl = el;\n\t\tthis._selectController = selectController;\n\n\t\tthis._selectController.getAllItems().forEach(\n\t\t\titem => this.registerEl(item)\n\t\t);\n\t}\n\n\tregisterEl(el) {\n\t\tel.removeEventListener('keydown', this._onKeyDown);\n\t\tel.addEventListener('keydown', this._onKeyDown);\n\t}\n\n\n\t_onKeyDown(e) {\n\t\tconst ESC = 27,\n\t\t\t  ENTER = 13;\n\n\t\tlet target = e.target; \n\n\t\t//Escape is the abort keystroke (for any target element)\n\t\tif (e.keyCode == ESC) {\n\t\t\tthis._selectController.unsetSelectedItem();\n\t\t\tthis._selectController.getSelectables()[0].focus();\n\t\t\tthis._selectController.unsetActiveTarget();\n\t\t}\n\n\t\t// select\n\t\tif (e.keyCode == ENTER) {\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tif (target === this._selectController.getSelectedItem()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// is selecting a target\n\t\t\tif (this._selectController.isTarget(target) && this._selectController.hasSelectedItem()) {\n\t\t\t\tthis._selectController.combine(this._selectController.getSelectedItem(), target);\n\t\t\t\ttarget = null;\n\t\t\t}\n\t\t\tthis._selectController.unsetSelectedItem();\n\t\t\tthis._selectController.unsetActiveTarget();\n\n\t\t\t// is selecting a selectable\n\t\t\tif (this._selectController.isSelectable(target)) {\n\t\t\t\tthis._selectController.setSelectedItem(target);\n\t\t\t\tthis._selectController.getTargets()[0].focus();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} \n\n\n\n// WEBPACK FOOTER //\n// ./src/keyboardController.js","export default class ClickController {\n\tconstructor(el, selectController) {\n\t\t\n\t\tthis.myContainerEl = el;\n\t\tthis._selectController = selectController;\n\t\t\n\t\tthis._onClick = this._onClick.bind(this);\n\n\t\tthis._selectController.getAllItems().forEach(\n\t\t\titem => this.registerEl(item)\n\t\t);\n\t}\n\n\tregisterEl(el) {\n\t\tel.removeEventListener('click', this._onClick);\n\t\tel.addEventListener('click', this._onClick);\n\t}\n\n\t_onClick(e) {\n\t\tlet target = e.currentTarget;\n\n\t\tif (target === this._selectController.getSelectedItem()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._selectController.isTarget(target) && this._selectController.hasSelectedItem()) {\n\t\t\tthis._selectController.combine(this._selectController.getSelectedItem(), target);\n\t\t\tthis._selectController.unsetActiveTarget();\n\t\t\te.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tif (this._selectController.isSelectable(target)) {\n\t\t\tif (this._selectController.hasSelectedItem()) {\n\t\t\t\tthis._selectController.unsetSelectedItem();\n\t\t\t}\n\t\t\tthis._selectController.setSelectedItem(target);\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n}\t\t\t\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/clickController.js"],"sourceRoot":""}